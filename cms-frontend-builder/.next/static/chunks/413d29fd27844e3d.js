(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29275,e=>{"use strict";var t=e.i(69024),r=e.i(7317);function a(){let{tenantId:e}=(0,r.useTenant)(),a=(0,t.useSearchParams)().get("tenant");return e||a||null}e.s(["useTenantId",()=>a])},31500,e=>{"use strict";let t=(0,e.i(20968).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],31500)},86907,e=>{"use strict";e.s([])},68540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return s.callServer},createServerReference:function(){return d.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let s=e.r(33472),n=e.r(64056),d=e.r(2836)},21738,e=>{"use strict";var t=e.i(48564),r=e.i(12500);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},28906,e=>{"use strict";var t=e.i(78150),r=e.i(29275),a=e.i(7471);e.i(86907);var i=e.i(68540),s=(0,i.createServerReference)("00b2946ef30aacf41c89fa495e7737407fc4507ff5",i.callServer,void 0,i.findSourceMapURL,"listPages");function n(){let e=(0,r.useTenantId)(),[a,i]=(0,t.useState)([]),[n,d]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{e?async function(){try{d(!0);let e=await s();if(e.error){i([]),d(!1);return}let t=(e.data||[]).map(e=>({id:e.id,title:e.title,slug:e.slug,status:e.status,updatedAt:e.updated_at,updated_at:e.updated_at,blocks:[]}));i(t),d(!1)}catch(e){i([]),d(!1)}}():d(!1)},[e]),{pages:a,setPages:i,addPage:e=>{i(t=>[e,...t])},updatePage:(e,t)=>{i(r=>r.map(r=>r.id===e?{...r,...t}:r))},deletePage:e=>{i(t=>t.filter(t=>t.id!==e))},isLoading:n}}function d(e){let i=(0,r.useTenantId)(),[s,n]=(0,t.useState)(void 0),[d,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{i&&e&&"new"!==e?async function(){try{l(!0);let t=(0,a.supabaseBrowser)(),{data:r,error:s}=await t.from("tenants").select("id").eq("id",i).maybeSingle();if(s||!r)return void l(!1);let{data:d,error:o}=await t.from("pages").select("*").eq("id",e).eq("tenant_id",r.id).maybeSingle();if(o||!d)return void l(!1);let{data:c}=await t.from("page_versions").select("content").eq("page_id",e).order("version_number",{ascending:!1}).limit(1).maybeSingle(),u={id:d.id,title:d.title,slug:d.slug,status:d.status,updatedAt:d.updated_at,updated_at:d.updated_at,blocks:c?.content?.sections||[]};n(u),l(!1)}catch(e){l(!1)}}():l(!1)},[i,e]),{page:s,isLoading:d}}function l(e){let i=(0,r.useTenantId)(),[s,n]=(0,t.useState)([]),[d,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{i&&e&&"new"!==e?async function(){try{l(!0);let t=(0,a.supabaseBrowser)(),{data:r}=await t.from("page_versions").select("content").eq("page_id",e).order("version_number",{ascending:!1}).limit(1).maybeSingle(),i=(r?.content?.sections||[]).map((e,t)=>({id:e.id||`block-${t}`,type:e.type,data:e.props||{},props:e.props||{}}));n(i),l(!1)}catch(e){n([]),l(!1)}}():l(!1)},[i,e]),{blocks:s,setBlocks:n,isLoading:d}}e.s(["usePage",()=>d,"usePageBlocks",()=>l,"usePages",()=>n],28906)},32932,85607,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(94277);let i=(0,e.i(20968).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var s=e.i(89915),n=e.i(82016),d=e.i(21738),l=e.i(52390);function o({data:e,columns:o,searchKey:c,onRowClick:u,pageSize:f=10}){let[m,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(0),v=(0,r.useMemo)(()=>m&&c?e.filter(e=>String(e[c]).toLowerCase().includes(m.toLowerCase())):e,[e,m,c]),x=v.slice(p*f,(p+1)*f),b=Math.ceil(v.length/f);return(0,t.jsxs)("div",{className:"space-y-4",children:[c&&(0,t.jsxs)("div",{className:"relative max-w-sm",children:[(0,t.jsx)(i,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Search...",value:m,onChange:e=>{g(e.target.value),h(0)},className:"pl-9 rounded-xl"})]}),(0,t.jsx)("div",{className:"overflow-hidden rounded-2xl border border-border",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50",children:(0,t.jsx)("tr",{children:o.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:e.label},String(e.key)))})}),(0,t.jsx)("tbody",{children:x.map((e,r)=>(0,t.jsx)(a.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.03*r},onClick:()=>u?.(e),className:"border-t border-border bg-card transition-colors hover:bg-muted/30 cursor-pointer",children:o.map(r=>(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-card-foreground",children:r.render?r.render(e):String(e[r.key]??"")},String(r.key)))},e.id))})]})}),b>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Showing ",p*f+1,"-",Math.min((p+1)*f,v.length)," of ",v.length]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"icon",onClick:()=>h(e=>Math.max(0,e-1)),disabled:0===p,className:"h-8 w-8 rounded-lg",children:(0,t.jsx)(s.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"outline",size:"icon",onClick:()=>h(e=>Math.min(b-1,e+1)),disabled:p>=b-1,className:"h-8 w-8 rounded-lg",children:(0,t.jsx)(n.ChevronRight,{className:"h-4 w-4"})})]})]})]})}e.s(["DataTable",()=>o],32932);var c=e.i(34375),u=e.i(52368),f=e.i(12500);let m=(0,u.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:e,variant:r,asChild:a=!1,...i}){let s=a?c.Slot:"span";return(0,t.jsx)(s,{"data-slot":"badge",className:(0,f.cn)(m({variant:r}),e),...i})}e.s(["Badge",()=>g],85607)},65828,e=>{"use strict";var t=e.i(48564),r=e.i(69024),a=e.i(94277),i=e.i(5325),s=e.i(31500),n=e.i(52390),d=e.i(32932),l=e.i(28906),o=e.i(85607);function c(){let e=(0,r.useRouter)(),{pages:c,deletePage:u,isLoading:f}=(0,l.usePages)(),m=[{key:"title",label:"Τίτλος",render:e=>(0,t.jsx)("span",{className:"font-medium",children:e.title})},{key:"slug",label:"Slug",render:e=>(0,t.jsx)("code",{className:"rounded bg-muted px-1.5 py-0.5 text-xs",children:e.slug})},{key:"status",label:"Κατάσταση",render:e=>(0,t.jsx)(o.Badge,{variant:"published"===e.status?"default":"secondary",className:"rounded-full",children:"published"===e.status?"Δημοσιευμένη":"Πρόχειρο"})},{key:"updatedAt",label:"Ενημέρωση",render:e=>(0,t.jsx)("span",{className:"text-muted-foreground",children:new Date(e.updatedAt).toLocaleDateString("el-GR")})},{key:"actions",label:"",render:e=>(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτή τη σελίδα;")&&u(r))},className:"h-8 w-8 rounded-lg text-destructive hover:bg-destructive/10 hover:text-destructive",children:(0,t.jsx)(s.Trash2,{className:"h-4 w-4"})})}];return f?(0,t.jsx)("div",{className:"flex h-64 items-center justify-center text-muted-foreground",children:"Φόρτωση..."}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Σελίδες"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Διαχειριστείτε τις σελίδες του site"})]})}),(0,t.jsx)(d.DataTable,{data:c,columns:m,searchKey:"title",onRowClick:t=>e.push(`/pages/${t.id}/edit`)}),(0,t.jsx)(a.motion.div,{className:"fixed bottom-8 right-8",initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:(0,t.jsxs)(n.Button,{onClick:()=>e.push("/pages/new/edit"),size:"lg",className:"h-14 gap-2 rounded-2xl px-6 shadow-lg",children:[(0,t.jsx)(i.Plus,{className:"h-5 w-5"}),"Νέα Σελίδα"]})})]})}e.s(["default",()=>c])}]);