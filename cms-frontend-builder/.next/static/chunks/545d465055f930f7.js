(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43843,e=>{"use strict";var t=e.i(78150),r=e.i(29275);e.i(86907);var a=e.i(68540),s=(0,a.createServerReference)("003abdea1bebe025a462efeac684d81daa6c40da37",a.callServer,void 0,a.findSourceMapURL,"listPosts"),i=(0,a.createServerReference)("404597e3dcd148939d0f10f47392d6103b22e2c95d",a.callServer,void 0,a.findSourceMapURL,"getPostById");function n(){let e=(0,r.useTenantId)(),[a,i]=(0,t.useState)([]),[n,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{e?async function(){try{l(!0);let e=await s();if(e.error){i([]),l(!1);return}let t=(e.data||[]).map(e=>({id:e.id,title:e.title,slug:e.slug,status:e.status,publishedAt:e.published_at,published_at:e.published_at,coverImage:null,excerpt:e.excerpt,content:e.content}));i(t),l(!1)}catch(e){i([]),l(!1)}}():l(!1)},[e]),{posts:a,setPosts:i,addPost:e=>{i(t=>[e,...t])},updatePost:(e,t)=>{i(r=>r.map(r=>r.id===e?{...r,...t}:r))},deletePost:e=>{i(t=>t.filter(t=>t.id!==e))},isLoading:n}}function l(e){let a=(0,r.useTenantId)(),[s,n]=(0,t.useState)(void 0),[l,o]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{a&&e&&"new"!==e?async function(){try{o(!0);let t=await i(e);if(t.error||!t.data)return void o(!1);let r=t.data,a={id:r.id,title:r.title,slug:r.slug,status:r.status,publishedAt:r.published_at,published_at:r.published_at,coverImage:null,excerpt:r.excerpt,content:r.content};n(a),o(!1)}catch(e){o(!1)}}():o(!1)},[a,e]),{post:s,isLoading:l}}e.s(["usePost",()=>l,"usePosts",()=>n],43843)},18739,e=>{"use strict";let t=(0,e.i(20968).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],18739)},29275,e=>{"use strict";var t=e.i(69024),r=e.i(7317);function a(){let{tenantId:e}=(0,r.useTenant)(),a=(0,t.useSearchParams)().get("tenant");return e||a||null}e.s(["useTenantId",()=>a])},31500,e=>{"use strict";let t=(0,e.i(20968).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],31500)},86907,e=>{"use strict";e.s([])},68540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let i=e.r(33472),n=e.r(64056),l=e.r(2836)},21738,e=>{"use strict";var t=e.i(48564),r=e.i(12500);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},18117,35287,e=>{"use strict";let t=(0,e.i(20968).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],18117);var r=e.i(48564),a=e.i(12500);function s({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}e.s(["Textarea",()=>s],35287)},42077,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(21767),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(12500);function n({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],42077)},15443,e=>{"use strict";var t=e.i(78150);let r=0,a=new Map,s=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),i.forEach(e=>{e(n)})}function o({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,r]=t.useState(n);return t.useEffect(()=>(i.push(r),()=>{let e=i.indexOf(r);e>-1&&i.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},81873,e=>{"use strict";var t=e.i(23805);e.s(["Check",()=>t.default])},50195,e=>{"use strict";let t=(0,e.i(20968).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],50195)},92771,e=>{"use strict";let t=(0,e.i(20968).default)("GlobeLock",[["path",{d:"M15.686 15A14.5 14.5 0 0 1 12 22a14.5 14.5 0 0 1 0-20 10 10 0 1 0 9.542 13",key:"qkt0x6"}],["path",{d:"M2 12h8.5",key:"ovaggd"}],["path",{d:"M20 6V4a2 2 0 1 0-4 0v2",key:"1of5e8"}],["rect",{width:"8",height:"5",x:"14",y:"6",rx:"1",key:"1fmf51"}]]);e.s(["GlobeLock",()=>t],92771)},51853,(e,t,r)=>{var a=0/0,s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,c=e.g&&e.g.Object===Object&&e.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,v=Math.min,m=function(){return u.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==f.call(t))return a;if(x(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=x(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var c=n.test(e);return c||l.test(e)?o(e.slice(2),c?2:8):i.test(e)?a:+e}t.exports=function(e,t,r){var a,s,i,n,l,o,c=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(t){var r=a,i=s;return a=s=void 0,c=t,n=e.apply(i,r)}function g(e){var r=e-o,a=e-c;return void 0===o||r>=t||r<0||u&&a>=i}function y(){var e,r,a,s=m();if(g(s))return j(s);l=setTimeout(y,(e=s-o,r=s-c,a=t-e,u?v(a,i-r):a))}function j(e){return(l=void 0,f&&a)?b(e):(a=s=void 0,n)}function w(){var e,r=m(),i=g(r);if(a=arguments,s=this,o=r,i){if(void 0===l)return c=e=o,l=setTimeout(y,t),d?b(e):n;if(u)return l=setTimeout(y,t),b(o)}return void 0===l&&(l=setTimeout(y,t)),n}return t=h(t)||0,x(r)&&(d=!!r.leading,i=(u="maxWait"in r)?p(h(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f),w.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=o=s=l=void 0},w.flush=function(){return void 0===l?n:j(m())},w}},67857,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(21565);let s=(0,e.i(20968).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var i=e.i(18117),n=e.i(12500),l=e.i(68540),o=(0,l.createServerReference)("40295af451c37fe4e2d0e1c9350d8a63cf8237a8f3",l.callServer,void 0,l.findSourceMapURL,"uploadImageForTenant"),c=e.i(15443);function d({value:e,onChange:l,className:d,placeholder:u="Upload image"}){let f=(0,r.useRef)(null),[p,v]=(0,r.useState)(e||null),[m,x]=(0,r.useState)(!1),{toast:h}=(0,c.useToast)(),b=async e=>{let t=e.target.files?.[0];if(!t)return;let r=URL.createObjectURL(t);v(r),x(!0);try{let e=await o(t);if("error"in e&&e.error){h({title:"Upload failed",description:e.error,variant:"destructive"}),v(null),f.current&&(f.current.value="");return}"data"in e&&e.data&&(URL.revokeObjectURL(r),v(e.data.url),l(e.data.url),h({title:"Upload successful",description:"Image uploaded successfully"}))}catch(e){h({title:"Upload failed",description:e instanceof Error?e.message:"Unknown error",variant:"destructive"}),v(null),f.current&&(f.current.value="")}finally{x(!1)}};return(0,t.jsxs)("div",{onClick:()=>f.current?.click(),className:(0,n.cn)("group relative flex cursor-pointer items-center justify-center overflow-hidden border-2 border-dashed border-border bg-muted/30 transition-colors hover:border-primary/50",d),children:[(0,t.jsx)("input",{ref:f,type:"file",accept:"image/*",onChange:b,className:"hidden"}),p||e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:p||e,alt:"",className:"h-full w-full object-cover"}),m&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,t.jsx)(i.Loader2,{className:"h-6 w-6 animate-spin text-white"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),p&&p.startsWith("blob:")&&URL.revokeObjectURL(p),v(null),l(""),f.current&&(f.current.value="")},disabled:m,className:"absolute right-2 top-2 flex h-6 w-6 items-center justify-center rounded-full bg-destructive text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100 disabled:opacity-50",children:(0,t.jsx)(a.X,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[m?(0,t.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin"}):(0,t.jsx)(s,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"text-sm",children:m?"Uploading...":u})]})]})}e.s(["ImageUploader",()=>d],67857)},69386,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(69024),s=e.i(94277),i=e.i(75156),n=e.i(50195),l=e.i(81873),o=e.i(18117),c=e.i(70589),d=e.i(92771),u=e.i(18739),f=e.i(31500),p=e.i(90320),v=e.i(52390),m=e.i(21738),x=e.i(35287),h=e.i(42077),b=e.i(43843);e.i(86907);var g=e.i(68540),y=(0,g.createServerReference)("6088b5ee655652ad23c826479d65153bdb3d1382cd",g.callServer,void 0,g.findSourceMapURL,"savePost"),j=(0,g.createServerReference)("40458f5dfc6bd652ecedcf13d27629f1fd407b8b4a",g.callServer,void 0,g.findSourceMapURL,"publishPost"),w=(0,g.createServerReference)("402b5d80b59ad582ec4cbab8bd6ced14716de1ada7",g.callServer,void 0,g.findSourceMapURL,"deletePost"),S=e.i(51853),N=e.i(67857),T=e.i(15443);function k({params:e}){let{id:g}=(0,r.use)(e),k=(0,a.useRouter)(),I="new"===g,{post:L}=(0,b.usePost)(I?"1":g),{addPost:M,updatePost:P,deletePost:R}=(0,b.usePosts)(),[O,A]=(0,r.useState)({title:"",slug:"",content:"",coverImage:null,status:"draft"}),[E,U]=(0,r.useState)("idle"),[C,_]=(0,r.useState)(!0),{toast:D}=(0,T.useToast)(),[z,F]=(0,r.useTransition)();(0,r.useEffect)(()=>{L&&!I&&A(L)},[L,I]);let $=(0,r.useCallback)((0,S.default)(async(e,t)=>{(t.title||t.content)&&F(async()=>{U("saving");let r=await y("new"===e?null:e,{title:t.title||"",slug:t.slug||V(t.title||""),excerpt:t.excerpt||"",content:t.content||"",coverImage:t.coverImage||null,status:("archived"===t.status?"draft":t.status)||"draft"});r.error?(D({title:"Error",description:r.error,variant:"destructive"}),U("idle")):(U("saved"),setTimeout(()=>U("idle"),2e3),I&&r.data&&k.replace(`/posts/${r.data.id}`))})},1e3),[D,I,k]);(0,r.useEffect)(()=>((O.title||O.content)&&$(g,O),()=>{$.cancel()}),[O,$,g]);let B=async()=>{if(I){let e=await y(null,{title:O.title||"",slug:O.slug||V(O.title||""),excerpt:O.excerpt||"",content:O.content||"",coverImage:O.coverImage||null,status:"published"});return e.error||!e.data?void D({title:"Error",description:e.error||"Failed to save post",variant:"destructive"}):(k.replace(`/posts/${e.data.id}`),A(t=>({...t,status:"published",id:e.data.id})),void D({title:"Published",description:"Post is now live"}))}F(async()=>{let e="published"===O.status?"draft":"published";if("published"===e){let e=await j(g);if(e.error)return void D({title:"Error",description:e.error,variant:"destructive"})}else{let e=await y(g,{title:O.title||"",slug:O.slug||"",excerpt:O.excerpt||"",content:O.content||"",coverImage:O.coverImage||null,status:"draft"});if(e.error)return void D({title:"Error",description:e.error,variant:"destructive"})}A(t=>({...t,status:e})),P(g,{status:e,publishedAt:"published"===e?new Date().toISOString():null}),D({title:"published"===e?"Published":"Unpublished",description:"published"===e?"Post is now live":"Post is now a draft"})})},G=async()=>{if(confirm("Are you sure you want to delete this post?")){if(I)return void k.push("/posts");F(async()=>{let e=await w(g);e.error?D({title:"Error",description:e.error,variant:"destructive"}):(R(g),k.push("/posts"),D({title:"Deleted",description:"Post deleted successfully"}))})}},V=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");return(0,t.jsxs)("div",{className:"flex h-[calc(100vh-4rem)] flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(v.Button,{variant:"ghost",size:"icon",asChild:!0,className:"rounded-xl",children:(0,t.jsx)(p.default,{href:"/posts",children:(0,t.jsx)(n.ArrowLeft,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-semibold",children:I?"Νέο Άρθρο":O.title||"Χωρίς τίτλο"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:O.slug?`/${O.slug}`:"/untitled"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:"idle"!==E&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"flex items-center gap-2 text-sm text-muted-foreground",children:"saving"===E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}),"Αποθήκευση..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Check,{className:"h-4 w-4 text-primary"}),"Αποθηκεύτηκε"]})})}),(0,t.jsxs)(v.Button,{variant:"outline",size:"sm",onClick:()=>_(!C),className:"gap-2 rounded-xl",children:[(0,t.jsx)(u.Eye,{className:"h-4 w-4"}),C?"Απόκρυψη":"Προεπισκόπηση"]}),!I&&(0,t.jsxs)(v.Button,{variant:"outline",size:"sm",onClick:G,className:"gap-2 rounded-xl text-destructive hover:bg-destructive/10 bg-transparent",children:[(0,t.jsx)(f.Trash2,{className:"h-4 w-4"}),"Διαγραφή"]}),(0,t.jsx)(v.Button,{onClick:B,variant:"published"===O.status?"secondary":"default",size:"sm",className:"gap-2 rounded-xl",children:"published"===O.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.GlobeLock,{className:"h-4 w-4"}),"Αποδημοσίευση"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Globe,{className:"h-4 w-4"}),"Δημοσίευση"]})})]})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-2xl space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.Label,{children:"Τίτλος"}),(0,t.jsx)(m.Input,{value:O.title||"",onChange:e=>{let t=e.target.value;A(e=>({...e,title:t,slug:e.slug||V(t)}))},placeholder:"Τίτλος άρθρου",className:"rounded-xl text-lg"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.Label,{children:"Slug"}),(0,t.jsx)(m.Input,{value:O.slug||"",onChange:e=>A(t=>({...t,slug:e.target.value})),placeholder:"post-slug",className:"rounded-xl font-mono text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.Label,{children:"Εικόνα Εξωφύλλου"}),(0,t.jsx)(N.ImageUploader,{value:O.coverImage||"",onChange:e=>A(t=>({...t,coverImage:e})),className:"aspect-video rounded-xl"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.Label,{children:"Περιεχόμενο (Markdown)"}),(0,t.jsx)(x.Textarea,{value:O.content||"",onChange:e=>A(t=>({...t,content:e.target.value})),placeholder:"Γράψτε το περιεχόμενο σε Markdown...",className:"min-h-[400px] rounded-xl font-mono text-sm"})]})]})}),(0,t.jsx)(i.AnimatePresence,{children:C&&(0,t.jsx)(s.motion.div,{initial:{width:0,opacity:0},animate:{width:400,opacity:1},exit:{width:0,opacity:0},className:"shrink-0 overflow-y-auto border-l border-border bg-muted/30",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("p",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Προεπισκόπηση"}),(0,t.jsxs)("article",{className:"prose prose-sm dark:prose-invert",children:[O.coverImage&&(0,t.jsx)("img",{src:O.coverImage||"/placeholder.svg",alt:"",className:"mb-6 aspect-video w-full rounded-xl object-cover"}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:O.title||"Χωρίς τίτλο"}),(0,t.jsx)("div",{className:"mt-4 whitespace-pre-wrap text-muted-foreground",children:O.content||"Ξεκινήστε να γράφετε για να δείτε την προεπισκόπηση..."})]})]})})})]})]})}e.s(["default",()=>k],69386)}]);