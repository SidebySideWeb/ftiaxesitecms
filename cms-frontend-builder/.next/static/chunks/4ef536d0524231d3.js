(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28906,e=>{"use strict";var t=e.i(78150),r=e.i(29275),a=e.i(7471);e.i(86907);var i=e.i(68540),s=(0,i.createServerReference)("00b2946ef30aacf41c89fa495e7737407fc4507ff5",i.callServer,void 0,i.findSourceMapURL,"listPages");function n(){let e=(0,r.useTenantId)(),[a,i]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{e?async function(){try{o(!0);let e=await s();if(e.error){i([]),o(!1);return}let t=(e.data||[]).map(e=>({id:e.id,title:e.title,slug:e.slug,status:e.status,updatedAt:e.updated_at,updated_at:e.updated_at,blocks:[]}));i(t),o(!1)}catch(e){i([]),o(!1)}}():o(!1)},[e]),{pages:a,setPages:i,addPage:e=>{i(t=>[e,...t])},updatePage:(e,t)=>{i(r=>r.map(r=>r.id===e?{...r,...t}:r))},deletePage:e=>{i(t=>t.filter(t=>t.id!==e))},isLoading:n}}function o(e){let i=(0,r.useTenantId)(),[s,n]=(0,t.useState)(void 0),[o,c]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{i&&e&&"new"!==e?async function(){try{c(!0);let t=(0,a.supabaseBrowser)(),{data:r,error:s}=await t.from("tenants").select("id").eq("id",i).maybeSingle();if(s||!r)return void c(!1);let{data:o,error:u}=await t.from("pages").select("*").eq("id",e).eq("tenant_id",r.id).maybeSingle();if(u||!o)return void c(!1);let{data:l}=await t.from("page_versions").select("content").eq("page_id",e).order("version_number",{ascending:!1}).limit(1).maybeSingle(),d={id:o.id,title:o.title,slug:o.slug,status:o.status,updatedAt:o.updated_at,updated_at:o.updated_at,blocks:l?.content?.sections||[]};n(d),c(!1)}catch(e){c(!1)}}():c(!1)},[i,e]),{page:s,isLoading:o}}function c(e){let i=(0,r.useTenantId)(),[s,n]=(0,t.useState)([]),[o,c]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{i&&e&&"new"!==e?async function(){try{c(!0);let t=(0,a.supabaseBrowser)(),{data:r}=await t.from("page_versions").select("content").eq("page_id",e).order("version_number",{ascending:!1}).limit(1).maybeSingle(),i=(r?.content?.sections||[]).map((e,t)=>({id:e.id||`block-${t}`,type:e.type,data:e.props||{},props:e.props||{}}));n(i),c(!1)}catch(e){n([]),c(!1)}}():c(!1)},[i,e]),{blocks:s,setBlocks:n,isLoading:o}}e.s(["usePage",()=>o,"usePageBlocks",()=>c,"usePages",()=>n],28906)},15443,e=>{"use strict";var t=e.i(78150);let r=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},s=[],n={toasts:[]};function o(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),s.forEach(e=>{e(n)})}function c({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,r]=t.useState(n);return t.useEffect(()=>(s.push(r),()=>{let e=s.indexOf(r);e>-1&&s.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>u])},42077,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(21767),i=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var s=e.i(12500);function n({className:e,...r}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],42077)},81873,e=>{"use strict";var t=e.i(23805);e.s(["Check",()=>t.default])},14132,e=>{"use strict";let t=(0,e.i(20968).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],14132)},29275,e=>{"use strict";var t=e.i(69024),r=e.i(7317);function a(){let{tenantId:e}=(0,r.useTenant)(),a=(0,t.useSearchParams)().get("tenant");return e||a||null}e.s(["useTenantId",()=>a])},31500,e=>{"use strict";let t=(0,e.i(20968).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],31500)},86907,e=>{"use strict";e.s([])},68540,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return s.callServer},createServerReference:function(){return o.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let s=e.r(33472),n=e.r(64056),o=e.r(2836)},21738,e=>{"use strict";var t=e.i(48564),r=e.i(12500);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},18117,35287,e=>{"use strict";let t=(0,e.i(20968).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],18117);var r=e.i(48564),a=e.i(12500);function i({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}e.s(["Textarea",()=>i],35287)},1021,93265,e=>{"use strict";let t=(0,e.i(20968).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],1021);var r=e.i(78150);function a(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>a],93265)},92771,e=>{"use strict";let t=(0,e.i(20968).default)("GlobeLock",[["path",{d:"M15.686 15A14.5 14.5 0 0 1 12 22a14.5 14.5 0 0 1 0-20 10 10 0 1 0 9.542 13",key:"qkt0x6"}],["path",{d:"M2 12h8.5",key:"ovaggd"}],["path",{d:"M20 6V4a2 2 0 1 0-4 0v2",key:"1of5e8"}],["rect",{width:"8",height:"5",x:"14",y:"6",rx:"1",key:"1fmf51"}]]);e.s(["GlobeLock",()=>t],92771)},50195,e=>{"use strict";let t=(0,e.i(20968).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],50195)},51853,(e,t,r)=>{var a=0/0,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt,u=e.g&&e.g.Object===Object&&e.g,l="object"==typeof self&&self&&self.Object===Object&&self,d=u||l||Function("return this")(),f=Object.prototype.toString,p=Math.max,v=Math.min,y=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==f.call(t))return a;if(m(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=m(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var u=n.test(e);return u||o.test(e)?c(e.slice(2),u?2:8):s.test(e)?a:+e}t.exports=function(e,t,r){var a,i,s,n,o,c,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(t){var r=a,s=i;return a=i=void 0,u=t,n=e.apply(s,r)}function x(e){var r=e-c,a=e-u;return void 0===c||r>=t||r<0||d&&a>=s}function h(){var e,r,a,i=y();if(x(i))return S(i);o=setTimeout(h,(e=i-c,r=i-u,a=t-e,d?v(a,s-r):a))}function S(e){return(o=void 0,f&&a)?b(e):(a=i=void 0,n)}function k(){var e,r=y(),s=x(r);if(a=arguments,i=this,c=r,s){if(void 0===o)return u=e=c,o=setTimeout(h,t),l?b(e):n;if(d)return o=setTimeout(h,t),b(c)}return void 0===o&&(o=setTimeout(h,t)),n}return t=g(t)||0,m(r)&&(l=!!r.leading,s=(d="maxWait"in r)?p(g(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f),k.cancel=function(){void 0!==o&&clearTimeout(o),u=0,a=c=i=o=void 0},k.flush=function(){return void 0===o?n:S(y())},k}},67857,e=>{"use strict";var t=e.i(48564),r=e.i(78150),a=e.i(21565);let i=(0,e.i(20968).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var s=e.i(18117),n=e.i(12500),o=e.i(68540),c=(0,o.createServerReference)("4035acdded56aef54f8fe0527261325aa697264fc5",o.callServer,void 0,o.findSourceMapURL,"uploadImageForTenant"),u=e.i(15443);function l({value:e,onChange:o,className:l,placeholder:d="Upload image"}){let f=(0,r.useRef)(null),[p,v]=(0,r.useState)(e||null),[y,m]=(0,r.useState)(!1),{toast:g}=(0,u.useToast)(),b=async e=>{let t=e.target.files?.[0];if(!t)return;let r=URL.createObjectURL(t);v(r),m(!0);try{let e=await c(t);if("error"in e&&e.error){g({title:"Upload failed",description:e.error,variant:"destructive"}),v(null),f.current&&(f.current.value="");return}"data"in e&&e.data&&(URL.revokeObjectURL(r),v(e.data.url),o(e.data.url),g({title:"Upload successful",description:"Image uploaded successfully"}))}catch(e){g({title:"Upload failed",description:e instanceof Error?e.message:"Unknown error",variant:"destructive"}),v(null),f.current&&(f.current.value="")}finally{m(!1)}};return(0,t.jsxs)("div",{onClick:()=>f.current?.click(),className:(0,n.cn)("group relative flex cursor-pointer items-center justify-center overflow-hidden border-2 border-dashed border-border bg-muted/30 transition-colors hover:border-primary/50",l),children:[(0,t.jsx)("input",{ref:f,type:"file",accept:"image/*",onChange:b,className:"hidden"}),p||e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:p||e,alt:"",className:"h-full w-full object-cover"}),y&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,t.jsx)(s.Loader2,{className:"h-6 w-6 animate-spin text-white"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),p&&p.startsWith("blob:")&&URL.revokeObjectURL(p),v(null),o(""),f.current&&(f.current.value="")},disabled:y,className:"absolute right-2 top-2 flex h-6 w-6 items-center justify-center rounded-full bg-destructive text-destructive-foreground opacity-0 transition-opacity group-hover:opacity-100 disabled:opacity-50",children:(0,t.jsx)(a.X,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[y?(0,t.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin"}):(0,t.jsx)(i,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"text-sm",children:y?"Uploading...":d})]})]})}e.s(["ImageUploader",()=>l],67857)}]);