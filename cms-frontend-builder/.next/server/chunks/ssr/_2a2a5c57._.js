module.exports=[34699,a=>{"use strict";var b=a.i(34445);a.i(52434);var c=a.i(13422),d=a.i(80494);async function e(){try{let a=await (0,b.headers)(),e=a.get("host")||a.get("x-forwarded-host");if(e){let a=e.split(":")[0].split(".");if(a.length>2){let b=a[0],c=(0,d.supabaseServer)(),{data:e,error:f}=await c.from("tenants").select("id").eq("slug",b).maybeSingle();if(e&&!f)return e.id}}let f=await (0,b.cookies)(),g=(0,c.createServerClient)("https://qgisnksjztjczsrbjryr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFnaXNua3NqenRqY3pzcmJqcnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwNTI0ODcsImV4cCI6MjA4MDYyODQ4N30.B9j69ZAWHxEKvgJC0B_4iVtj45h2USfbWWssIQCx_DA",{cookies:{get:a=>f.get(a)?.value}}),{data:{user:h}}=await g.auth.getUser();if(h){let{data:a,error:b}=await g.from("tenant_users").select("tenant_id").eq("user_id",h.id).limit(1).maybeSingle();if(a?.tenant_id&&!b)return a.tenant_id}let i=(0,d.supabaseServer)(),{data:j,error:k}=await i.from("tenants").select("id").eq("slug","kalitechnia").maybeSingle();if(j&&!k)return j.id;return null}catch(a){return console.error("Error getting tenant ID:",a),null}}a.s(["getTenantIdForServerAction",()=>e])},8398,a=>{"use strict";var b=a.i(64898),c=a.i(80494),d=a.i(34699),e=a.i(93879);async function f(){try{let a=await (0,d.getTenantIdForServerAction)();if(!a)return{error:"Tenant not found"};let b=(0,c.supabaseServer)(),{data:e,error:f}=await b.from("globals").select("*").eq("tenant_id",a).eq("status","published");if(f)return{error:f.message};return{data:e||[]}}catch(a){return{error:a instanceof Error?a.message:"Unknown error"}}}async function g(){try{let a=await (0,d.getTenantIdForServerAction)();if(!a)return{error:"Tenant not found"};let b=(0,c.supabaseServer)(),{data:e,error:f}=await b.from("globals").select("*").eq("tenant_id",a).order("key");if(f)return{error:f.message};return{data:e||[]}}catch(a){return{error:a instanceof Error?a.message:"Unknown error"}}}async function h(a){try{let b=await (0,d.getTenantIdForServerAction)();if(!b)return{error:"Tenant not found"};let f=(0,c.supabaseServer)(),g=[];for(let c of a){let{data:a,error:d}=await f.from("globals").upsert({tenant_id:b,key:c.key,value:c.value,status:c.status||"published"},{onConflict:"tenant_id,key"}).select().single();if(d)return{error:d.message};g.push(a)}return(0,e.revalidatePath)("/api/public/globals"),{data:g}}catch(a){return{error:a instanceof Error?a.message:"Unknown error"}}}(0,a.i(57097).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"0053d7d241b13be47df82ac4f2621d0b99814ef959",null),(0,b.registerServerReference)(g,"00013de38bbe598ae2ea053d10eb448f9d6abdbdc8",null),(0,b.registerServerReference)(h,"40b4f9f7bbc42e6b7abac6c0ecfee6d1c8bea699f3",null),a.s([],80095),a.i(80095),a.s(["00013de38bbe598ae2ea053d10eb448f9d6abdbdc8",()=>g,"40b4f9f7bbc42e6b7abac6c0ecfee6d1c8bea699f3",()=>h],8398)}];

//# sourceMappingURL=_2a2a5c57._.js.map