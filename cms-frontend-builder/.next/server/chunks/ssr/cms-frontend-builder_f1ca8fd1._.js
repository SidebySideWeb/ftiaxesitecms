module.exports=[92132,a=>{"use strict";var b=a.i(90785),c=a.i(27017);function d(){let{tenantId:a}=(0,c.useTenant)(),d=(0,b.useSearchParams)().get("tenant");return a||d||null}a.s(["useTenantId",()=>d])},95685,a=>{"use strict";let b=(0,a.i(5097).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],95685)},95507,a=>{"use strict";a.s([])},7536,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(44473),g=a.r(53478),h=a.r(38261)},37383,a=>{"use strict";var b=a.i(44279),c=a.i(94027);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},85961,a=>{"use strict";var b=a.i(68316),c=a.i(92132),d=a.i(10849);a.i(95507);var e=a.i(7536),f=(0,e.createServerReference)("0048dcfaa6b58a52a88fe46dca566ac0267b67cd50",e.callServer,void 0,e.findSourceMapURL,"listPages");function g(){let a=(0,c.useTenantId)(),[d,e]=(0,b.useState)([]),[g,h]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{a?async function(){try{h(!0);let a=await f();if(a.error){e([]),h(!1);return}let b=(a.data||[]).map(a=>({id:a.id,title:a.title,slug:a.slug,status:a.status,updatedAt:a.updated_at,updated_at:a.updated_at,blocks:[]}));e(b),h(!1)}catch(a){e([]),h(!1)}}():h(!1)},[a]),{pages:d,setPages:e,addPage:a=>{e(b=>[a,...b])},updatePage:(a,b)=>{e(c=>c.map(c=>c.id===a?{...c,...b}:c))},deletePage:a=>{e(b=>b.filter(b=>b.id!==a))},isLoading:g}}function h(a){let e=(0,c.useTenantId)(),[f,g]=(0,b.useState)(void 0),[h,i]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{e&&a&&"new"!==a?async function(){try{i(!0);let b=(0,d.supabaseBrowser)(),{data:c,error:f}=await b.from("tenants").select("id").eq("id",e).maybeSingle();if(f||!c)return void i(!1);let{data:h,error:j}=await b.from("pages").select("*").eq("id",a).eq("tenant_id",c.id).maybeSingle();if(j||!h)return void i(!1);let{data:k}=await b.from("page_versions").select("content").eq("page_id",a).order("version_number",{ascending:!1}).limit(1).maybeSingle(),l={id:h.id,title:h.title,slug:h.slug,status:h.status,updatedAt:h.updated_at,updated_at:h.updated_at,blocks:k?.content?.sections||[]};g(l),i(!1)}catch(a){i(!1)}}():i(!1)},[e,a]),{page:f,isLoading:h}}function i(a){let e=(0,c.useTenantId)(),[f,g]=(0,b.useState)([]),[h,i]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{e&&a&&"new"!==a?async function(){try{i(!0);let b=(0,d.supabaseBrowser)(),{data:c}=await b.from("page_versions").select("content").eq("page_id",a).order("version_number",{ascending:!1}).limit(1).maybeSingle(),e=(c?.content?.sections||[]).map((a,b)=>({id:a.id||`block-${b}`,type:a.type,data:a.props||{},props:a.props||{}}));g(e),i(!1)}catch(a){g([]),i(!1)}}():i(!1)},[e,a]),{blocks:f,setBlocks:g,isLoading:h}}a.s(["usePage",()=>h,"usePageBlocks",()=>i,"usePages",()=>g],85961)},98175,73978,a=>{"use strict";var b=a.i(44279),c=a.i(68316),d=a.i(86719);let e=(0,a.i(5097).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var f=a.i(95279),g=a.i(74888),h=a.i(37383),i=a.i(78359);function j({data:a,columns:j,searchKey:k,onRowClick:l,pageSize:m=10}){let[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(0),r=(0,c.useMemo)(()=>n&&k?a.filter(a=>String(a[k]).toLowerCase().includes(n.toLowerCase())):a,[a,n,k]),s=r.slice(p*m,(p+1)*m),t=Math.ceil(r.length/m);return(0,b.jsxs)("div",{className:"space-y-4",children:[k&&(0,b.jsxs)("div",{className:"relative max-w-sm",children:[(0,b.jsx)(e,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search...",value:n,onChange:a=>{o(a.target.value),q(0)},className:"pl-9 rounded-xl"})]}),(0,b.jsx)("div",{className:"overflow-hidden rounded-2xl border border-border",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsx)("tr",{children:j.map(a=>(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:a.label},String(a.key)))})}),(0,b.jsx)("tbody",{children:s.map((a,c)=>(0,b.jsx)(d.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.03*c},onClick:()=>l?.(a),className:"border-t border-border bg-card transition-colors hover:bg-muted/30 cursor-pointer",children:j.map(c=>(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-card-foreground",children:c.render?c.render(a):String(a[c.key]??"")},String(c.key)))},a.id))})]})}),t>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Showing ",p*m+1,"-",Math.min((p+1)*m,r.length)," of ",r.length]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"icon",onClick:()=>q(a=>Math.max(0,a-1)),disabled:0===p,className:"h-8 w-8 rounded-lg",children:(0,b.jsx)(f.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(i.Button,{variant:"outline",size:"icon",onClick:()=>q(a=>Math.min(t-1,a+1)),disabled:p>=t-1,className:"h-8 w-8 rounded-lg",children:(0,b.jsx)(g.ChevronRight,{className:"h-4 w-4"})})]})]})]})}a.s(["DataTable",()=>j],98175);var k=a.i(12636),l=a.i(53822),m=a.i(94027);let n=(0,l.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:a,variant:c,asChild:d=!1,...e}){let f=d?k.Slot:"span";return(0,b.jsx)(f,{"data-slot":"badge",className:(0,m.cn)(n({variant:c}),a),...e})}a.s(["Badge",()=>o],73978)},40352,a=>{"use strict";var b=a.i(44279),c=a.i(90785),d=a.i(86719),e=a.i(47341),f=a.i(95685),g=a.i(78359),h=a.i(98175),i=a.i(85961),j=a.i(73978);function k(){let a=(0,c.useRouter)(),{pages:k,deletePage:l,isLoading:m}=(0,i.usePages)(),n=[{key:"title",label:"Τίτλος",render:a=>(0,b.jsx)("span",{className:"font-medium",children:a.title})},{key:"slug",label:"Slug",render:a=>(0,b.jsx)("code",{className:"rounded bg-muted px-1.5 py-0.5 text-xs",children:a.slug})},{key:"status",label:"Κατάσταση",render:a=>(0,b.jsx)(j.Badge,{variant:"published"===a.status?"default":"secondary",className:"rounded-full",children:"published"===a.status?"Δημοσιευμένη":"Πρόχειρο"})},{key:"updatedAt",label:"Ενημέρωση",render:a=>(0,b.jsx)("span",{className:"text-muted-foreground",children:new Date(a.updatedAt).toLocaleDateString("el-GR")})},{key:"actions",label:"",render:a=>(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:b=>{var c;return c=a.id,void(b.stopPropagation(),confirm("Είστε σίγουροι ότι θέλετε να διαγράψετε αυτή τη σελίδα;")&&l(c))},className:"h-8 w-8 rounded-lg text-destructive hover:bg-destructive/10 hover:text-destructive",children:(0,b.jsx)(f.Trash2,{className:"h-4 w-4"})})}];return m?(0,b.jsx)("div",{className:"flex h-64 items-center justify-center text-muted-foreground",children:"Φόρτωση..."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Σελίδες"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Διαχειριστείτε τις σελίδες του site"})]})}),(0,b.jsx)(h.DataTable,{data:k,columns:n,searchKey:"title",onRowClick:b=>a.push(`/pages/${b.id}/edit`)}),(0,b.jsx)(d.motion.div,{className:"fixed bottom-8 right-8",initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:(0,b.jsxs)(g.Button,{onClick:()=>a.push("/pages/new/edit"),size:"lg",className:"h-14 gap-2 rounded-2xl px-6 shadow-lg",children:[(0,b.jsx)(e.Plus,{className:"h-5 w-5"}),"Νέα Σελίδα"]})})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=cms-frontend-builder_f1ca8fd1._.js.map